"use strict";(self.webpackChunkc_8_y_docs=self.webpackChunkc_8_y_docs||[]).push([[3282],{228:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>d,toc:()=>a});var t=n(4848),i=n(8453);const c={sidebar_position:1},l="How to demo thin-edge.io",d={id:"thin-edge/how-to",title:"How to demo thin-edge.io",description:"thin-edge.io demo container setup to showcase thin-edge.io and all its features",source:"@site/docs/thin-edge/how-to.md",sourceDirName:"thin-edge",slug:"/thin-edge/how-to",permalink:"/c8y-demos/docs/thin-edge/how-to",draft:!1,unlisted:!1,editUrl:"https://github.com/scfx/c8y-demos/docs/thin-edge/how-to.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"thin-edge.io",permalink:"/c8y-demos/docs/category/thin-edgeio"},next:{title:"Container management",permalink:"/c8y-demos/docs/thin-edge/container-management"}},o={},a=[{value:"Pre-requisites",id:"pre-requisites",level:2},{value:"Getting started",id:"getting-started",level:2},{value:"Building the project yourself",id:"building-the-project-yourself",level:2},{value:"Running Tests",id:"running-tests",level:2},{value:"What is included?",id:"what-is-included",level:2},{value:"Known issues",id:"known-issues",level:2}];function r(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"how-to-demo-thin-edgeio",children:"How to demo thin-edge.io"}),"\n",(0,t.jsx)(s.p,{children:"thin-edge.io demo container setup to showcase thin-edge.io and all its features"}),"\n",(0,t.jsx)(s.h2,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,t.jsx)(s.p,{children:"The following pre-requisites are required before you can get started:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"docker"}),"\n",(0,t.jsx)(s.li,{children:"docker compose v2 (not the python one)"}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"getting-started",children:"Getting started"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Download the docker compose file from the repository"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"curl -LSs https://raw.githubusercontent.com/thin-edge/tedge-demo-container/main/demos/docker-compose/device/docker-compose.yaml > docker-compose.yaml\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Or alternatively you can download it using ",(0,t.jsx)(s.code,{children:"wget"})]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"wget https://raw.githubusercontent.com/thin-edge/tedge-demo-container/main/demos/docker-compose/device/docker-compose.yaml\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Start the docker-compose project (in the background)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"docker compose up -d\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Bootstrap the device"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"docker compose exec tedge bootstrap.sh\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Click on the link to your tedge device which is shown on the console"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Note"})}),"\n",(0,t.jsx)(s.p,{children:"The tedge container has the following default SSH user which can be used with the SSH protocol of the Cumulocity IoT Cloud Remote Access (CRA) feature."}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Property"}),(0,t.jsx)(s.th,{children:"Value"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SSH User"}),(0,t.jsx)(s.td,{children:"iotadmin"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SSH Password"}),(0,t.jsx)(s.td,{children:"iotadmin"})]})]})]}),"\n",(0,t.jsx)(s.h2,{id:"building-the-project-yourself",children:"Building the project yourself"}),"\n",(0,t.jsx)(s.p,{children:"The project also includes another docker-compose file to build the project locally. This allows you to manually tweak any of the container images to add/remove things as you see fit."}),"\n",(0,t.jsxs)(s.p,{children:["After you have cloned the project you still need to install, ",(0,t.jsx)(s.a,{href:"https://github.com/casey/just",children:"just"}),". ",(0,t.jsx)(s.code,{children:"just"})," is used as the project's task runner to simplify the commands required during development. Check out their ",(0,t.jsx)(s.a,{href:"https://just.systems/man/en/chapter_1.html",children:"installation instructions"})," to see how to install it on your machine."]}),"\n",(0,t.jsxs)(s.p,{children:["Once you have ",(0,t.jsx)(s.a,{href:"https://github.com/casey/just",children:"just"})," installed, you can proceed with the following instructions:"]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Create the ",(0,t.jsx)(s.code,{children:".env"})," template file"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"just create-env\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Fill in the values for each of the environment variables in the ",(0,t.jsx)(s.code,{children:".env"})," file. Whilst the settings in the ",(0,t.jsx)(s.code,{children:".env"})," file are not mandatory, it does allow you to set sensible defaults for your setup so that you don't have to enter your username or Cumulocity URL multiple times during the bootstrapping phase."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Start the docker compose project (this will also build the containers)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"just up\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Bootstrap the main device (don't worry you only have to do this once)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"just bootstrap\n"})}),"\n",(0,t.jsxs)(s.p,{children:["You will be prompted for the required details. You can hit ",(0,t.jsx)(s.code,{children:"<enter>"})," to accept the default values. The default values are provided via the ",(0,t.jsx)(s.code,{children:".env"})," file from the first step."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Click on the device link shown on your console"}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"That's it \ud83d\ude80"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"running-tests",children:"Running Tests"}),"\n",(0,t.jsx)(s.p,{children:"Integration tests are included in the demo to ensure that everything is working as it should. The tests can be run using the following steps:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Edit the ",(0,t.jsx)(s.code,{children:".env"})," file and add the following environment variables"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:'DEVICE_ID=tedge_unique_name_abcdef\nC8Y_BASEURL=example.tenant.c8y.io\nC8Y_USER=myuser@example.com\nC8Y_PASSWORD="your_password"\n'})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Start the demo and bootstrap it"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"just up\njust bootstrap --no-prompt\n"})}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Run the tests"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"just test\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"what-is-included",children:"What is included?"}),"\n",(0,t.jsx)(s.p,{children:"The following features are covered by the demo."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Main device"})}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Configuration management"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","mqtt-logger (to better understand what messages are going in and out)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Device reboot"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Events","\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","On boot-up service: sends an event on startup"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Log management","\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","log files"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Measurements (via collectd)"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Remote Access","\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","SSH"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Services","\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","tedge services"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Shell"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Software management","\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","apt"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","container (docker, docker-compose)"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Telemetry","\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Collectd"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Child devices"})}),"\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Configuration management"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Firmware management","\n",(0,t.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Sending events before and after the operation transition are being delayed and sent at once"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Measurements"]}),"\n",(0,t.jsxs)(s.li,{className:"task-list-item",children:[(0,t.jsx)(s.input,{type:"checkbox",checked:!0,disabled:!0})," ","Services"]}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"known-issues",children:"Known issues"}),"\n",(0,t.jsx)(s.p,{children:"There are currently no known issues."})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(r,{...e})}):r(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>d});var t=n(6540);const i={},c=t.createContext(i);function l(e){const s=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(c.Provider,{value:s},e.children)}}}]);