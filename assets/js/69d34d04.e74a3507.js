"use strict";(self.webpackChunkc_8_y_docs=self.webpackChunkc_8_y_docs||[]).push([[8187],{5517:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>s,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var n=t(4848),a=t(8453);const r={sidebar_position:1},d="Jupyter Notebook",i={id:"datahub/jupyter-notebook",title:"Jupyter Notebook",description:"Let's discover how to analyse IoT Data offloaded with Datahub in Jupyter Notebooks.",source:"@site/docs/datahub/jupyter-notebook.md",sourceDirName:"datahub",slug:"/datahub/jupyter-notebook",permalink:"/c8y-demos/docs/datahub/jupyter-notebook",draft:!1,unlisted:!1,editUrl:"https://github.com/scfx/c8y-demos/docs/datahub/jupyter-notebook.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Datahub",permalink:"/c8y-demos/docs/category/datahub"},next:{title:"How to add a demo",permalink:"/c8y-demos/docs/category/how-to-add-a-demo"}},s={},c=[{value:"What you&#39;ll need",id:"what-youll-need",level:4},{value:"Start your Jupyter Notebook via docker compose",id:"start-your-jupyter-notebook-via-docker-compose",level:2},{value:"Add your Datahub credentials in Jupyter Notebook",id:"add-your-datahub-credentials-in-jupyter-notebook",level:2},{value:"Add python packages if needed",id:"add-python-packages-if-needed",level:2}];function l(e){const o={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(o.h1,{id:"jupyter-notebook",children:"Jupyter Notebook"}),"\n",(0,n.jsxs)(o.p,{children:["Let's discover how to analyse IoT Data offloaded with ",(0,n.jsx)(o.strong,{children:"Datahub"})," in ",(0,n.jsx)(o.strong,{children:"Jupyter Notebooks"}),".\nThe demo will start a docker container with a pre-run Jupyter Notebook. You can either showcase the analytics with the provided notebook or create your own analysis on your data."]}),"\n",(0,n.jsx)(o.h4,{id:"what-youll-need",children:"What you'll need"}),"\n",(0,n.jsxs)(o.ul,{children:["\n",(0,n.jsx)(o.li,{children:"docker compose installed on your machine"}),"\n",(0,n.jsx)(o.li,{children:"Configured Datahub connection to a cold storage and offloaded data"}),"\n",(0,n.jsx)(o.li,{children:"A Dremio user with credentials"}),"\n"]}),"\n",(0,n.jsxs)(o.admonition,{title:"Take care",type:"danger",children:[(0,n.jsx)(o.p,{children:"As running data analysis can be resource intensive, it is recommended to increase the resources available to the docker daemon.\nIf you are using macOS and colima, you can increase the resources with:"}),(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"colima start --arch aarch64 --vm-type=vz --vz-rosetta --cpu 4 --memory 16\n"})}),(0,n.jsx)(o.p,{children:"If your containers exceed the available resources, your jupyter kernel will crash and you have to rerun the computation with more resources allocated.\nYou can monitor the resource consumption of the docker daemon with the following command:"}),(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"docker container stats\n"})})]}),"\n",(0,n.jsx)(o.h2,{id:"start-your-jupyter-notebook-via-docker-compose",children:"Start your Jupyter Notebook via docker compose"}),"\n",(0,n.jsx)(o.p,{children:"The demo is located in the 'datahub/jupyter-notebook' folder of this repository. To start the demo, clone the full repository to your machine"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"git clone github.com/scfx/c8y-demos\n"})}),"\n",(0,n.jsx)(o.p,{children:"and navigate to the 'datahub/jupyter-notebook' folder.\nStart the demo container with:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-bash",children:"docker compose up\n"})}),"\n",(0,n.jsx)(o.p,{children:"The jupyter notebook will run on port 8888. For security reasons the container will be protected by a token. You can find the token in the logs of the started container.\nThe URL will look like this:"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{children:"http://127.0.0.1:8888/lab?token=yourTokenHere\n"})}),"\n",(0,n.jsx)(o.h2,{id:"add-your-datahub-credentials-in-jupyter-notebook",children:"Add your Datahub credentials in Jupyter Notebook"}),"\n",(0,n.jsx)(o.p,{children:"To offload data with the notebook from your datahub, you need to add your credentials in the second box"}),"\n",(0,n.jsx)(o.pre,{children:(0,n.jsx)(o.code,{className:"language-python",children:"host = 'datahub.eu-latest.cumulocity.com' #Change this, if you are not on eu-latest\nport = 32010\nuid = '' #Use a username here\npwd = '' #Use a  password here\ndriver = \"/opt/arrow-flight-sql-odbc-driver/lib64/libarrow-odbc.so.0.9.1.168\"\ncnxn=pyodbc.connect(\"Driver={};ConnectionType=Direct;HOST={};PORT={};AuthenticationType=Plain;UID={};PWD={};SSL=1\".format(driver,host,port,uid,pwd),autocommit=True)\n"})}),"\n",(0,n.jsx)(o.p,{children:(0,n.jsx)(o.img,{alt:"Jupyter example plot",src:t(2928).A+"",width:"1041",height:"550"})}),"\n",(0,n.jsx)(o.h2,{id:"add-python-packages-if-needed",children:"Add python packages if needed"}),"\n",(0,n.jsx)(o.p,{children:"The container has some standard data analytics python libraries installed like pandas or matplotlib. You can add more packages by modifying the jupyter/Dockerfile."})]})}function h(e={}){const{wrapper:o}={...(0,a.R)(),...e.components};return o?(0,n.jsx)(o,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},2928:(e,o,t)=>{t.d(o,{A:()=>n});const n=t.p+"assets/images/jupyter-example-plot-e83e65b1a2bed4c8df08cb888d6bc18c.png"},8453:(e,o,t)=>{t.d(o,{R:()=>d,x:()=>i});var n=t(6540);const a={},r=n.createContext(a);function d(e){const o=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:d(e.components),n.createElement(r.Provider,{value:o},e.children)}}}]);