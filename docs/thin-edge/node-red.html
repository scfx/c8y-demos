<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-thin-edge/node-red" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Node-Red | Cumulocity IoT Demos</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://scfx.github.io/c8y-demos/img/iot-hero-banner-03.png"><meta data-rh="true" name="twitter:image" content="https://scfx.github.io/c8y-demos/img/iot-hero-banner-03.png"><meta data-rh="true" property="og:url" content="https://scfx.github.io/c8y-demos/docs/thin-edge/node-red"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Node-Red | Cumulocity IoT Demos"><meta data-rh="true" name="description" content="Pre-requisites"><meta data-rh="true" property="og:description" content="Pre-requisites"><link data-rh="true" rel="icon" href="/c8y-demos/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://scfx.github.io/c8y-demos/docs/thin-edge/node-red"><link data-rh="true" rel="alternate" href="https://scfx.github.io/c8y-demos/docs/thin-edge/node-red" hreflang="en"><link data-rh="true" rel="alternate" href="https://scfx.github.io/c8y-demos/docs/thin-edge/node-red" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/c8y-demos/blog/rss.xml" title="Cumulocity IoT Demos RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/c8y-demos/blog/atom.xml" title="Cumulocity IoT Demos Atom Feed"><link rel="stylesheet" href="/c8y-demos/assets/css/styles.8e2dc745.css">
<script src="/c8y-demos/assets/js/runtime~main.24a4e6ef.js" defer="defer"></script>
<script src="/c8y-demos/assets/js/main.c514581a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/c8y-demos/"><b class="navbar__title text--truncate">Cumulocity IoT Demos</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/c8y-demos/docs/category/simulators">Demos</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/scfx/c8y-demos" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/c8y-demos/docs/category/simulators">Simulators</a><button aria-label="Expand sidebar category &#x27;Simulators&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/c8y-demos/docs/category/thin-edgeio">thin-edge.io</a><button aria-label="Collapse sidebar category &#x27;thin-edge.io&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/c8y-demos/docs/thin-edge/how-to">How to demo thin-edge.io</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/c8y-demos/docs/thin-edge/container-management">Container management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/c8y-demos/docs/thin-edge/node-red">Node-Red</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/c8y-demos/docs/thin-edge/local-ui">Local UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/c8y-demos/docs/thin-edge/firmware">Firmware Management</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/c8y-demos/docs/category/device-protocols">Device protocols</a><button aria-label="Expand sidebar category &#x27;Device protocols&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/c8y-demos/docs/category/datahub">Datahub</a><button aria-label="Expand sidebar category &#x27;Datahub&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/c8y-demos/docs/category/how-to-add-a-demo">How to add a demo</a><button aria-label="Expand sidebar category &#x27;How to add a demo&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/c8y-demos/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/c8y-demos/docs/category/thin-edgeio"><span itemprop="name">thin-edge.io</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Node-Red</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Node-Red</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisites">Pre-requisites<a href="#pre-requisites" class="hash-link" aria-label="Direct link to Pre-requisites" title="Direct link to Pre-requisites">​</a></h2>
<p>You need to have node-red already installed on your device. If you don&#x27;t already have it then check out the <a href="https://nodered.org/docs/getting-started/" target="_blank" rel="noopener noreferrer">Node-RED documentation</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-summary">Plugin summary<a href="#plugin-summary" class="hash-link" aria-label="Direct link to Plugin summary" title="Direct link to Plugin summary">​</a></h2>
<p>Install/remove node-red projects on a device using thin-edge.io software management plugin.</p>
<p><strong>Technical summary</strong></p>
<p>The following details the technical aspects of the plugin to get an idea what systems it supports.</p>
<table><thead><tr><th></th><th></th></tr></thead><tbody><tr><td><strong>Languages</strong></td><td><code>shell</code> (posix compatible)</td></tr><tr><td><strong>CPU Architectures</strong></td><td><code>all/noarch</code>. Not CPU specific</td></tr><tr><td><strong>Supported init systems</strong></td><td><code>N/A</code></td></tr><tr><td><strong>Required Dependencies</strong></td><td>-</td></tr><tr><td><strong>Optional Dependencies (feature specific)</strong></td><td>-</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-do-i-get-it">How to do I get it?<a href="#how-to-do-i-get-it" class="hash-link" aria-label="Direct link to How to do I get it?" title="Direct link to How to do I get it?">​</a></h3>
<p>The following linux package formats are provided on the releases page and also in the <a href="https://cloudsmith.io/~thinedge/repos/community/packages/" target="_blank" rel="noopener noreferrer">tedge-community</a> repository:</p>
<table><thead><tr><th>Operating System</th><th>Repository link</th></tr></thead><tbody><tr><td>Debian/Raspian (deb)</td><td><a href="https://cloudsmith.io/~thinedge/repos/community/packages/detail/deb/tedge-nodered-plugin/latest/a=all;d=any-distro%252Fany-version;t=binary/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://api-prd.cloudsmith.io/v1/badges/version/thinedge/community/deb/tedge-nodered-plugin/latest/a=all;d=any-distro%252Fany-version;t=binary/?render=true&amp;show_latest=true" alt="Latest version of &#x27;tedge-nodered-plugin&#x27; @ Cloudsmith" class="img_ev3q"></a></td></tr><tr><td>Alpine Linux (apk)</td><td><a href="https://cloudsmith.io/~thinedge/repos/community/packages/detail/alpine/tedge-nodered-plugin/latest/a=noarch;d=alpine%252Fany-version/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://api-prd.cloudsmith.io/v1/badges/version/thinedge/community/alpine/tedge-nodered-plugin/latest/a=noarch;d=alpine%252Fany-version/?render=true&amp;show_latest=true" alt="Latest version of &#x27;tedge-nodered-plugin&#x27; @ Cloudsmith" class="img_ev3q"></a></td></tr><tr><td>RHEL/CentOS/Fedora (rpm)</td><td><a href="https://cloudsmith.io/~thinedge/repos/community/packages/detail/rpm/tedge-nodered-plugin/latest/a=noarch;d=any-distro%252Fany-version;t=binary/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="https://api-prd.cloudsmith.io/v1/badges/version/thinedge/community/rpm/tedge-nodered-plugin/latest/a=noarch;d=any-distro%252Fany-version;t=binary/?render=true&amp;show_latest=true" alt="Latest version of &#x27;tedge-nodered-plugin&#x27; @ Cloudsmith" class="img_ev3q"></a></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-will-be-deployed-to-the-device">What will be deployed to the device?<a href="#what-will-be-deployed-to-the-device" class="hash-link" aria-label="Direct link to What will be deployed to the device?" title="Direct link to What will be deployed to the device?">​</a></h3>
<ul>
<li>The following software management plugins which is called when installing and removing <code>nodered</code> projects via Cumulocity IoT<!-- -->
<ul>
<li><code>nodered</code> - Deploy a project using the node-red project structure (e.g. git repository containing a flow)</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="activating-a-project">Activating a project<a href="#activating-a-project" class="hash-link" aria-label="Direct link to Activating a project" title="Direct link to Activating a project">​</a></h3>
<p>Node-red supports deploying multiple projects to a device however only one project can be active at one time. The <code>tedge-nodered-plugin</code> supports installing multiple projects, and the active project can be controlled by a special (magic) package name</p>
<p>A project can be activated by using a special package name and version.</p>
<table><thead><tr><th>Name</th><th>Version</th><th>SoftwareType</th></tr></thead><tbody><tr><td><code>active-project</code></td><td><code>&lt;project_name&gt;</code></td><td><code>nodered</code></td></tr></tbody></table>
<p>The reasoning behind having the magic package was to allow users to deploy projects to devices and decide whether it should be activated or not. Sometimes not automatically activating a project can be useful if you want to download the project to all the devices but wait to activate it at a later point in time.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="plugin-dependencies">Plugin Dependencies<a href="#plugin-dependencies" class="hash-link" aria-label="Direct link to Plugin Dependencies" title="Direct link to Plugin Dependencies">​</a></h2>
<p>The following packages are required to use the plugin:</p>
<ul>
<li>jq</li>
<li>curl</li>
<li>node-red</li>
<li>npm (requirement of node-red)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="known-issues">Known issues<a href="#known-issues" class="hash-link" aria-label="Direct link to Known issues" title="Direct link to Known issues">​</a></h2>
<ul>
<li>Activating a new project for the first time does not seem to work for reasons unknown, however restarting the <code>nodered</code> service seems to fix this. The root cause should be investigated as it is probably a sign that an API call is missing or the install sequence is wrong.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="development">Development<a href="#development" class="hash-link" aria-label="Direct link to Development" title="Direct link to Development">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="start-demo">Start demo<a href="#start-demo" class="hash-link" aria-label="Direct link to Start demo" title="Direct link to Start demo">​</a></h3>
<ol>
<li>
<p>Start the demo</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">just up</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Open the exposed container port <a href="http://localhost:1880" target="_blank" rel="noopener noreferrer">http://localhost:1880</a></p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stop-demo">Stop demo<a href="#stop-demo" class="hash-link" aria-label="Direct link to Stop demo" title="Direct link to Stop demo">​</a></h3>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">just down</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design">Design<a href="#design" class="hash-link" aria-label="Direct link to Design" title="Direct link to Design">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="proposed-workflow-of-a-node-red-project">Proposed workflow of a node-red project<a href="#proposed-workflow-of-a-node-red-project" class="hash-link" aria-label="Direct link to Proposed workflow of a node-red project" title="Direct link to Proposed workflow of a node-red project">​</a></h3>
<p>The following workflow details how node-red projects could be deployed to a fleet of devices. It shows the development process through to the deployment to devices.</p>
<ol>
<li>
<p>Create git repo for a node-red project (containing a flow)</p>
</li>
<li>
<p>Build/test the flow using a github runner or run on a device</p>
</li>
<li>
<p>Publish the flow to Cumulocity using go-c8y-cli to the software package (with new version)</p>
</li>
<li>
<p>Manually create a bulk operation to deploy the new flow to the fleet of devices</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="package-format">Package format<a href="#package-format" class="hash-link" aria-label="Direct link to Package format" title="Direct link to Package format">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="option1-configuration-file-containing-the-url-of-the-project">Option1: Configuration file containing the URL of the project<a href="#option1-configuration-file-containing-the-url-of-the-project" class="hash-link" aria-label="Direct link to Option1: Configuration file containing the URL of the project" title="Direct link to Option1: Configuration file containing the URL of the project">​</a></h4>
<p>A single file containing the git URL which can be used to clone the project on the device.</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">REPO=https://github.com/reubenmiller/nodered-demo.git</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="option-2-single-tarball-targz-file-containing-a-snapshot-of-the-project">Option 2: Single tarball (tar.gz) file containing a snapshot of the project<a href="#option-2-single-tarball-targz-file-containing-a-snapshot-of-the-project" class="hash-link" aria-label="Direct link to Option 2: Single tarball (tar.gz) file containing a snapshot of the project" title="Direct link to Option 2: Single tarball (tar.gz) file containing a snapshot of the project">​</a></h4>
<p>The single tarball which contains the exported project&#x27;s files.</p>
<ul>
<li>
<p>flow.json</p>
</li>
<li>
<p>settings.js (used to parameterize the flow.json)</p>
</li>
<li>
<p>dependencies.txt (text file containing each dependency one per line) this will be used to install npm modules</p>
</li>
<li>
<p>version file containing the version of the snapshot on the first line</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">1.0.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="packaging-a-node-red-project">Packaging a node-red project<a href="#packaging-a-node-red-project" class="hash-link" aria-label="Direct link to Packaging a node-red project" title="Direct link to Packaging a node-red project">​</a></h3>
<p>Instructions how to create an offline installable node-red project. It will export a git project and create a tarball (<code>.tar.gz</code>) that can be used with this plugin.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="archive-the-full-directory">Archive the full directory<a href="#archive-the-full-directory" class="hash-link" aria-label="Direct link to Archive the full directory" title="Direct link to Archive the full directory">​</a></h4>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">COMMIT=$(git rev-parse --short HEAD);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BRANCH=$(git rev-parse --abbrev-ref HEAD);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VERSION=&quot;$BRANCH@$COMMIT&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARCHIVE=&quot;$(basename $(pwd))__$VERSION&quot;.tar.gz;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tar cvzf &quot;$ARCHIVE&quot; .</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="archive-current-branch">Archive current branch<a href="#archive-current-branch" class="hash-link" aria-label="Direct link to Archive current branch" title="Direct link to Archive current branch">​</a></h4>
<ol>
<li>
<p>Create an archive using git (requires a recent version of git which supports the --add-virtual-file flag)</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd my-project</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COMMIT=$(git rev-parse --short HEAD);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BRANCH=$(git rev-parse --abbrev-ref HEAD);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VERSION=&quot;$BRANCH@$COMMIT&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ARCHIVE=&quot;$(basename $(pwd))__$VERSION&quot;.tar.gz;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git archive --format=tar.gz --add-virtual-file=version:&quot;$VERSION&quot; -o &quot;$ARCHIVE&quot; HEAD;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create the software item and upload the version to the Cumulocity software repository</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">c8y software create --name nodered-demo --description &quot;Node red flow&quot; --data softwareType=nodered</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Then add the version</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">c8y software versions create --software nodered-demo --version &quot;$VERSION::nodered&quot; --file ./nodered-demo__master@32256bb.tar.gz</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Or using wildcards</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c8y software versions create --software nodered-demo --version &quot;$VERSION::nodered&quot; --file ./nodered-demo__*@*.tar.gz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create an active flow software entry to control which item should be active. There should be one per flow</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">c8y software create --name active-flow --description &quot;Active node-red flow&quot; --data softwareType=nodered</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">c8y software versions create --software active-flow --version &quot;nodered-demo::nodered&quot; --url &quot; &quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uploading-a-project-using-an-external-url">Uploading a project using an external URL<a href="#uploading-a-project-using-an-external-url" class="hash-link" aria-label="Direct link to Uploading a project using an external URL" title="Direct link to Uploading a project using an external URL">​</a></h3>
<ol>
<li>
<p>Create a configuration file containing the url</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">REPO=https://github.com/reubenmiller/nodered-demo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>Create a software version item in Cumulocity IoT</p>
<div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">c8y software versions create --software nodered-demo --version &quot;latest::nodered&quot; --file ./tests/testdata/nodered-demo.cfg</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-ideas">Future ideas<a href="#future-ideas" class="hash-link" aria-label="Direct link to Future ideas" title="Direct link to Future ideas">​</a></h2>
<ul>
<li>How to spawn to node-red instances to support applying multiple flows on the same device. Each instance must use a different port / service.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/scfx/c8y-demos/docs/thin-edge/node-red.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/c8y-demos/docs/thin-edge/container-management"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Container management</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/c8y-demos/docs/thin-edge/local-ui"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Local UI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-requisites</a></li><li><a href="#plugin-summary" class="table-of-contents__link toc-highlight">Plugin summary</a><ul><li><a href="#how-to-do-i-get-it" class="table-of-contents__link toc-highlight">How to do I get it?</a></li><li><a href="#what-will-be-deployed-to-the-device" class="table-of-contents__link toc-highlight">What will be deployed to the device?</a></li><li><a href="#activating-a-project" class="table-of-contents__link toc-highlight">Activating a project</a></li></ul></li><li><a href="#plugin-dependencies" class="table-of-contents__link toc-highlight">Plugin Dependencies</a></li><li><a href="#known-issues" class="table-of-contents__link toc-highlight">Known issues</a></li><li><a href="#development" class="table-of-contents__link toc-highlight">Development</a><ul><li><a href="#start-demo" class="table-of-contents__link toc-highlight">Start demo</a></li><li><a href="#stop-demo" class="table-of-contents__link toc-highlight">Stop demo</a></li></ul></li><li><a href="#design" class="table-of-contents__link toc-highlight">Design</a><ul><li><a href="#proposed-workflow-of-a-node-red-project" class="table-of-contents__link toc-highlight">Proposed workflow of a node-red project</a></li><li><a href="#package-format" class="table-of-contents__link toc-highlight">Package format</a></li><li><a href="#packaging-a-node-red-project" class="table-of-contents__link toc-highlight">Packaging a node-red project</a></li><li><a href="#uploading-a-project-using-an-external-url" class="table-of-contents__link toc-highlight">Uploading a project using an external URL</a></li></ul></li><li><a href="#future-ideas" class="table-of-contents__link toc-highlight">Future ideas</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/c8y-demos/docs/category/how-to-add-a-demo">How to add a Demo</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://tech.forums.softwareag.com/tag/Cumulocity-IoT" target="_blank" rel="noopener noreferrer" class="footer__link-item">Tech Forum<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/scfx/c8y-demos" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">
        <hr>
        These tools are provided as-is and without warranty or support. They do not constitute part any product suite. Users are free to use, fork and modify them, subject to the license agreement. While we welcome contributions, we cannot guarantee to include every contribution in the master project.
          <br>
          <hr>
         Copyright © 2024 Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>